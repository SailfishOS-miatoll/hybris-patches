From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Martin Ghosal <Martin.Ghosal@sky.uk>
Date: Sun, 8 Jan 2017 16:34:54 +0000
Subject: [PATCH] (hybris) Disable all zygote variations

Change-Id: Ie1ad26486f47b3bf67134db917b3c9e51536904c
---
 rootdir/init.rc             | 2 +-
 rootdir/init.zygote32.rc    | 1 +
 rootdir/init.zygote64.rc    | 1 +
 rootdir/init.zygote64_32.rc | 2 ++
 4 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/rootdir/init.rc b/rootdir/init.rc
index 389fc239723604f9cc7c79ae9b452f5f0b1df9b3..5e123859dc2db3dfcd7f8da702563742f6e0d27d 100644
--- a/rootdir/init.rc
+++ b/rootdir/init.rc
@@ -16,7 +16,7 @@ import /init.environ.rc
 import /init.${ro.hardware}.rc
 import /vendor/etc/init/hw/init.${ro.hardware}.rc
 import /system/etc/init/hw/init.usb.configfs.rc
-import /system/etc/init/hw/init.${ro.zygote}.rc
+import /usr/libexec/droid-hybris/system/etc/init/hw/init.${ro.zygote}.rc
 
 # Cgroups are mounted right before early-init using list from /etc/cgroups.json
 on early-init
diff --git a/rootdir/init.zygote32.rc b/rootdir/init.zygote32.rc
index 2f0ec8a17d4c38a27a57ec7f12ed47fbdb343d99..e8a96d6b97f9c152427d01e4b3d1dafe0d817400 100644
--- a/rootdir/init.zygote32.rc
+++ b/rootdir/init.zygote32.rc
@@ -18,3 +18,4 @@ service zygote /system/bin/app_process -Xzygote /system/bin --zygote --start-sys
     onrestart restart wificond
     task_profiles ProcessCapacityHigh
     critical window=${zygote.critical_window.minute:-off} target=zygote-fatal
+    disabled
\ No newline at end of file
diff --git a/rootdir/init.zygote64.rc b/rootdir/init.zygote64.rc
index 805267d1dd2bfd727880aef5a7dd785c1adebbd8..de89dbe18e5989a80702248d6591d5151f1e2cf2 100644
--- a/rootdir/init.zygote64.rc
+++ b/rootdir/init.zygote64.rc
@@ -18,3 +18,4 @@ service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-s
     onrestart restart wificond
     task_profiles ProcessCapacityHigh
     critical window=${zygote.critical_window.minute:-off} target=zygote-fatal
+    disabled
diff --git a/rootdir/init.zygote64_32.rc b/rootdir/init.zygote64_32.rc
index efb30d664a7d4d556a2c9106eb7d40c499d757e8..c76b8d96b9179546a2825c8233701f9efeec1f19 100644
--- a/rootdir/init.zygote64_32.rc
+++ b/rootdir/init.zygote64_32.rc
@@ -15,6 +15,7 @@ service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-s
     onrestart restart wificond
     task_profiles ProcessCapacityHigh MaxPerformance
     critical window=${zygote.critical_window.minute:-off} target=zygote-fatal
+    disabled
 
 service zygote_secondary /system/bin/app_process32 -Xzygote /system/bin --zygote --socket-name=zygote_secondary --enable-lazy-preload
     class main
@@ -25,3 +26,4 @@ service zygote_secondary /system/bin/app_process32 -Xzygote /system/bin --zygote
     socket usap_pool_secondary stream 660 root system
     onrestart restart zygote
     task_profiles ProcessCapacityHigh MaxPerformance
+    disabled
